
## 优先级队列

优先级队列, 顾名思义, 具有高优先级的队列具有高的优先权, 优先级高的消息具备优先被消费的特权.

可以通过设置队列的 x-max-priority 参数来实现, 示例代码如下:

```java
Map<String, Object> args = new HashMap<String, Object>();
args.put("x-max-priority", 10);
channel.queueDeclare("queue.priority", true, false, false, args);
```

通过 web 管理界面可以看到 "Pri" 的标识.

以上的代码演示的是如何配制一个队列的最大优先级. 在此之后, 需要在发送时在消息中设置消息当前的优先级, 代码如下:

```java
AMQP.BasicProperties.Builder builder = new AMQP.BasicProperties.Builder();
builder.priority(5);
AMQP.BasicProperties properties = builder.builder();
channel.basicPublish("exchange_priority", "rk_priority", properties, ("messages").getBytes());
```
